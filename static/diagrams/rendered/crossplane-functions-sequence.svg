<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="723px" preserveAspectRatio="none" style="width:1061px;height:723px;background:#FFFFFF;" version="1.1" viewBox="0 0 1061 723" width="1061px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="341" y="115.4297"/><rect fill="#FFFFFF" height="180.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="341" y="173.6953"/><rect fill="#FFFFFF" height="93.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="341" y="383.625"/><rect fill="#FFFFFF" height="116.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="341" y="506.1563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="24" x2="24" y1="84.2969" y2="640.6875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="346" x2="346" y1="84.2969" y2="640.6875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="648" x2="648" y1="84.2969" y2="640.6875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="732" x2="732" y1="84.2969" y2="640.6875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="834" x2="834" y1="84.2969" y2="640.6875"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="975" x2="975" y1="84.2969" y2="640.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="5" y="80.9951">User</text><ellipse cx="24" cy="16.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M24,24.5 L24,51.5 M11,32.5 L37,32.5 M24,51.5 L11,66.5 M24,51.5 L37,66.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="5" y="652.6826">User</text><ellipse cx="24" cy="664.4844" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M24,672.4844 L24,699.4844 M11,680.4844 L37,680.4844 M24,699.4844 L11,714.4844 M24,699.4844 L37,714.4844 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="304" y="64.6982">Crossplane</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="329.5" y="80.9951">Pod</text><ellipse cx="346" cy="35.7031" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="342,23.7031,348,18.7031,346,23.7031,348,28.7031,342,23.7031" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78" x="304" y="652.6826">Crossplane</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="329.5" y="668.9795">Pod</text><ellipse cx="346" cy="688.2813" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="342,676.2813,348,671.2813,346,676.2813,348,681.2813,342,676.2813" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="615" y="64.6982">Function</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="631.5" y="80.9951">Pod</text><ellipse cx="648" cy="35.7031" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="644,23.7031,650,18.7031,648,23.7031,650,28.7031,644,23.7031" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="615" y="652.6826">Function</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="27" x="631.5" y="668.9795">Pod</text><ellipse cx="648" cy="688.2813" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><polygon fill="#181818" points="644,676.2813,650,671.2813,648,676.2813,650,681.2813,644,676.2813" style="stroke:#181818;stroke-width:1.0;"/><rect fill="#E2E2F0" height="78.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="691" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="698" y="24.9951">API Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="706.5" y="72.9951"> </text><image height="48" width="48" x="710.5" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAABUUlEQVR4Xu2XsQ3CQAxFb4RsECZALBCJAVLQ01BT0aajTElHS0VNQ0/BAEhZAGUCRuCLBOviI4qEwPeLWL+5k5U8nX0+29X1g0ou3IqrEWhIHaCqul+vN2P1AmXZ3EWy/f6ggZbLlfayNQSnAzSdzrSLrckhtUBpOtEuv7AkScpydzyeJB8QCizX603HzwwINM33IcAhDrJUSWIEdD5fhAC/yPOFLMHqexoBCQHC1OzIPVdZawTkXmmk/o0lNv0dFwJFLEKNSXBbIDnSKOYnewsEgRGZj6gbqyi2wtABIhExEFfI6JKa7trTFcY/AeU9Twe6H/VHIyC6x5Wu/ehr0HDVfTcXAtG1sHRNPtYRS9GHMUiwwkHu3/IBNBCDiE+IK4fobhldHTKu1OMo/Ta6176vH6qDrDUCcl93jBGLUGO6p6abOmq2uYxHI9CQRqAhPQHbPpHDO6vkjgAAAABJRU5ErkJggg==" y="28.2969"/><rect fill="#E2E2F0" height="78.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="691" y="639.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="698" y="659.6826">API Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="706.5" y="707.6826"> </text><image height="48" width="48" x="710.5" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAABUUlEQVR4Xu2XsQ3CQAxFb4RsECZALBCJAVLQ01BT0aajTElHS0VNQ0/BAEhZAGUCRuCLBOviI4qEwPeLWL+5k5U8nX0+29X1g0ou3IqrEWhIHaCqul+vN2P1AmXZ3EWy/f6ggZbLlfayNQSnAzSdzrSLrckhtUBpOtEuv7AkScpydzyeJB8QCizX603HzwwINM33IcAhDrJUSWIEdD5fhAC/yPOFLMHqexoBCQHC1OzIPVdZawTkXmmk/o0lNv0dFwJFLEKNSXBbIDnSKOYnewsEgRGZj6gbqyi2wtABIhExEFfI6JKa7trTFcY/AeU9Twe6H/VHIyC6x5Wu/ehr0HDVfTcXAtG1sHRNPtYRS9GHMUiwwkHu3/IBNBCDiE+IK4fobhldHTKu1OMo/Ta6176vH6qDrDUCcl93jBGLUGO6p6abOmq2uYxHI9CQRqAhPQHbPpHDO6vkjgAAAABJRU5ErkJggg==" y="662.9844"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="784" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="791" y="72.9951">Composition</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="101" x="784" y="639.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="791" y="659.6826">Composition</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="895" y="36.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="902" y="56.6982">Composite Resource</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19" x="965.5" y="72.9951">XR</text><rect fill="#E2E2F0" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="895" y="639.6875"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="902" y="659.6826">Composite Resource</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="19" x="965.5" y="675.9795">XR</text><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="341" y="115.4297"/><rect fill="#FFFFFF" height="180.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="341" y="173.6953"/><rect fill="#FFFFFF" height="93.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="341" y="383.625"/><rect fill="#FFFFFF" height="116.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="341" y="506.1563"/><polygon fill="#181818" points="329,111.4297,339,115.4297,329,119.4297,333,115.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="24" x2="335" y1="115.4297" y2="115.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="31" y="110.3638">Install Function Package</text><polygon fill="#181818" points="35,140.5625,25,144.5625,35,148.5625,31,144.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="29" x2="345" y1="144.5625" y2="144.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169" x="41" y="139.4966">Function Package Installed</text><polygon fill="#181818" points="329,169.6953,339,173.6953,329,177.6953,333,173.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="24" x2="335" y1="173.6953" y2="173.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="31" y="168.6294">Create Composite Resource (XR)</text><polygon fill="#181818" points="636,198.8281,646,202.8281,636,206.8281,640,202.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="351" x2="642" y1="202.8281" y2="202.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="358" y="197.7622">RunFunctionRequest</text><path d="M356,215.8281 L356,240.8281 L513,240.8281 L513,225.8281 L503,215.8281 L356,215.8281 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M503,215.8281 L503,225.8281 L513,225.8281 L503,215.8281 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136" x="362" y="232.895">gRPC communication</text><polygon fill="#181818" points="362,263.0938,352,267.0938,362,271.0938,358,267.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="356" x2="647" y1="267.0938" y2="267.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273" x="368" y="262.0278">RunFunctionResponse (Desired Resources)</text><polygon fill="#181818" points="720.5,292.2266,730.5,296.2266,720.5,300.2266,724.5,296.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="351" x2="726.5" y1="296.2266" y2="296.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158" x="358" y="291.1606">Apply Desired Resources</text><polygon fill="#181818" points="362,321.3594,352,325.3594,362,329.3594,358,325.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="356" x2="731.5" y1="325.3594" y2="325.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="368" y="320.2935">Confirm Resource Creation</text><polygon fill="#181818" points="35,350.4922,25,354.4922,35,358.4922,31,354.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="29" x2="345" y1="354.4922" y2="354.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="41" y="349.4263">Composite Resource Created/Updated</text><polygon fill="#181818" points="329,379.625,339,383.625,329,387.625,333,383.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="24" x2="335" y1="383.625" y2="383.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205" x="31" y="378.5591">Test Composition with Functions</text><polygon fill="#181818" points="636,411.7578,646,415.7578,636,419.7578,640,415.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="351" x2="642" y1="415.7578" y2="415.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="358" y="410.6919">Render Request</text><path d="M653,396.625 L653,421.625 L932,421.625 L932,406.625 L922,396.625 L653,396.625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M922,396.625 L922,406.625 L932,406.625 L922,396.625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="258" x="659" y="413.6919">run crossplane beta render ... command</text><polygon fill="#181818" points="362,443.8906,352,447.8906,362,451.8906,358,447.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="356" x2="647" y1="447.8906" y2="447.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="248" x="368" y="442.8247">Render Response (Resources as YAML)</text><polygon fill="#181818" points="35,473.0234,25,477.0234,35,481.0234,31,477.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="29" x2="345" y1="477.0234" y2="477.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="41" y="471.9575">Display Rendered Output</text><polygon fill="#181818" points="329,502.1563,339,506.1563,329,510.1563,333,506.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="24" x2="335" y1="506.1563" y2="506.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="31" y="501.0903">Reference Function in Composition</text><polygon fill="#181818" points="822.5,531.2891,832.5,535.2891,822.5,539.2891,826.5,535.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="351" x2="828.5" y1="535.2891" y2="535.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="358" y="530.2231">Reference Function</text><polygon fill="#181818" points="963,560.4219,973,564.4219,963,568.4219,967,564.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="834.5" x2="969" y1="564.4219" y2="564.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="841.5" y="559.356">Render Resources</text><polygon fill="#181818" points="362,589.5547,352,593.5547,362,597.5547,358,593.5547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="356" x2="974" y1="593.5547" y2="593.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="368" y="588.4888">Resources Rendered</text><polygon fill="#181818" points="35,618.6875,25,622.6875,35,626.6875,31,622.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="29" x2="345" y1="622.6875" y2="622.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="293" x="41" y="617.6216">Function Referenced and Resources Rendered</text><!--MD5=[08d8b6fb5198fb5f62b102f0596991c1]
@startuml

actor User
control "Crossplane\nPod" as CP
control "Function\nPod" as FP
!include <tupadr3/font-awesome-5/server>
participant "API Server\n <$server>" as API
participant "Composition" as Comp
participant "Composite Resource\nXR" as XR

User -> CP : Install Function Package
activate CP
CP - -> User : Function Package Installed
deactivate CP

User -> CP : Create Composite Resource (XR)
activate CP
CP -> FP : RunFunctionRequest
note right of CP
  gRPC communication
end note
FP - -> CP : RunFunctionResponse (Desired Resources)
CP -> API : Apply Desired Resources
API - -> CP : Confirm Resource Creation
CP - -> User : Composite Resource Created/Updated
deactivate CP

User -> CP : Test Composition with Functions
activate CP
CP -> FP : Render Request
note right
  run crossplane beta render ... command
end note
FP - -> CP : Render Response (Resources as YAML)
CP - -> User : Display Rendered Output
deactivate CP

User -> CP : Reference Function in Composition
activate CP
CP -> Comp : Reference Function
Comp -> XR : Render Resources
XR - -> CP : Resources Rendered
CP - -> User : Function Referenced and Resources Rendered
deactivate CP

@enduml

@startuml

actor User
control "Crossplane\nPod" as CP
control "Function\nPod" as FP
sprite $server [48x48/16] {
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000012222222222222222222222222222222222222200000
000BFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5000
009FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF100
00CFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF500
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFFE64BFF948FFFFF500
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFF6000EC0009FFFF500
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFF3000DA0006FFFF500
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFFA004FF200CFFFF500
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFFFECFFFFCEFFFFF500
00BFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF300
004FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC000
00039AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA70000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
00039AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA70000
004FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC000
00BFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF300
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFFFECFFFFCEFFFFF500
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFFA004FF201DFFFF500
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFF3000DA0006FFFF500
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFF6000EC0009FFFF500
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFFE64BFF947FFFFF500
00CFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF500
009FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF100
001BFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5000
000012222222222222222222222222222222222222200000
000000000000000000000000000000000000000000000000
000012222222222222222222222222222222222222200000
000BFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5000
009FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF100
00CFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF500
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFFE64BFF948FFFFF500
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFF6000EC0009FFFF500
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFF3000DA0006FFFF500
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFFA004FF200CFFFF500
00DFFFFFFFFFFFFFFFFFFFFFFFFFFFFFECFFFFCEFFFFF500
00BFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF300
004FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC000
00039AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA70000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
}


skinparam folderBackgroundColor<<FA5 SERVER>> White
participant "API Server\n <$server>" as API
participant "Composition" as Comp
participant "Composite Resource\nXR" as XR

User -> CP : Install Function Package
activate CP
CP - -> User : Function Package Installed
deactivate CP

User -> CP : Create Composite Resource (XR)
activate CP
CP -> FP : RunFunctionRequest
note right of CP
  gRPC communication
end note
FP - -> CP : RunFunctionResponse (Desired Resources)
CP -> API : Apply Desired Resources
API - -> CP : Confirm Resource Creation
CP - -> User : Composite Resource Created/Updated
deactivate CP

User -> CP : Test Composition with Functions
activate CP
CP -> FP : Render Request
note right
  run crossplane beta render ... command
end note
FP - -> CP : Render Response (Resources as YAML)
CP - -> User : Display Rendered Output
deactivate CP

User -> CP : Reference Function in Composition
activate CP
CP -> Comp : Reference Function
Comp -> XR : Render Resources
XR - -> CP : Resources Rendered
CP - -> User : Function Referenced and Resources Rendered
deactivate CP

@enduml

PlantUML version 1.2022.3(Tue Mar 29 18:10:57 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: GB
--></g></svg>