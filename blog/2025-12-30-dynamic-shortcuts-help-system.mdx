---
title: "Your Shortcuts YAML is Always Outdated (Parse Config Files Instead)"
date: 2025-12-30
tags: ["dotfiles", "terminal", "fzf", "tealdeer", "productivity", "python"]
image: _media/shortcuts-hero.jpg
description: "Static shortcuts files go stale within days. Parse your actual config files dynamically with confhelp and use tealdeer for everything else."
---

import DataGrid from '@site/src/components/DataGrid';

![Shortcuts Help](_media/shortcuts-hero.jpg)

<style>{`
  article img:not(:first-of-type) {
    max-width: 700px;
    height: auto;
  }
`}</style>

You add a new tmux binding. A week later you're hunting through `.tmux.conf` because you can't remember what you mapped to `prefix + g`. The shortcuts.yaml you maintain? Three months out of date.

The problem isn't discipline. It's architecture. Any system requiring manual sync between source of truth (config files) and documentation (shortcuts file) will drift.

Parse your config files directly. For workflows that don't map to a single keybinding, use tealdeer custom pages. One popup, two modes, zero maintenance.

<!--truncate-->

## The Architecture

Two types of "help" information exist:

**Config-derived** - keyboard shortcuts living in actual config files:
- tmux bindings in `.tmux.conf`
- zsh bindkeys in `.zshrc`
- aliases in `.zsh_aliases`
- abbreviations in `.zsh_abbreviations`

**Workflow-derived** - multi-step processes and reference material:
- "How do I copy in tmux?" (5 steps, not one keybinding)
- "What's the taskwarrior syntax?" (cheatsheet)

For config-derived, parse the files. For workflow-derived, use tealdeer custom pages.

## confhelp

I built [confhelp](https://github.com/Piotr1215/confhelp) to solve this. Define regex patterns in TOML, point at your dotfiles:

```bash
pip install confhelp
confhelp --init  # creates ~/.config/confhelp/config.toml
```

```toml
# ~/.config/confhelp/config.toml
[tmux]
paths = [".tmux.conf"]
match_line = "^bind"
regex = 'bind(?:-key)?\s+(?:-n\s+)?(\S+)(.*)'
key_group = 1
desc_group = 2
type = "tmux"
truncate = 100

[alias]
paths = [".zsh_aliases", ".zsh_claude"]
regex = "alias\\s+(?:-[gs]\\s+)?([^=]+)=(.*)"
key_group = 1
desc_group = 2
type = "alias"
strip_quotes = true

[abbrev]
paths = [".zsh_abbreviations"]
mode = "abbrev_block"
type = "abbrev"
```

Run it:

```bash
confhelp -b ~/dotfiles           # list all bindings
confhelp -b ~/dotfiles --select  # fzf selection, outputs file:line
confhelp -b ~/dotfiles --edit    # fzf selection, opens $EDITOR at line
```

Output is pipe-delimited: `[type]|key|description|file:line`

Each binding includes the exact file and line number. The `--edit` flag gives you jump-to-definition out of the box.

## fzf Integration

For advanced workflows (like combining with tealdeer), a wrapper script spawns a centered popup with mode switching:

```bash
selection=$(confhelp -b "$DOTFILES" | column -t -s'|' | fzf \
    --header='Enter=jump | Ctrl+G=tealdeer' \
    --bind='ctrl-g:become(echo SWITCH_TLDR)' \
    --height=100% \
    --layout=reverse)

if [[ -n "$selection" ]]; then
    file_line=$(echo "$selection" | awk '{print $NF}')
    file=$(echo "$file_line" | cut -d: -f1)
    line=$(echo "$file_line" | cut -d: -f2)
    nvim "+$line" "${DOTFILES}/${file}"
fi
```

The `become()` action replaces fzf with a new command without closing the terminal. Critical for smooth mode switching between bindings and tealdeer.

## Tealdeer Custom Pages

Tealdeer reads custom pages from a configured directory:

```toml
# ~/.config/tealdeer/config.toml
[directories]
custom_pages_dir = "/home/decoder/.local/share/tealdeer/pages"
```

Custom pages need `.page.md` extension:

```markdown
# tmux-copy-mode

> Tmux copy mode with vi keybindings

- Enter copy mode:

`prefix + [`

- Start selection:

`v` or `V` for line

- Copy selection:

`y`
```

Ctrl+G in the bindings popup switches to tealdeer browser. Custom pages appear with `[custom]` marker.

## Result

<DataGrid
  columns={[
    { key: 'aspect', label: 'Aspect' },
    { key: 'before', label: 'Before' },
    { key: 'after', label: 'After' }
  ]}
  data={[
    { aspect: 'Source of truth', before: 'shortcuts.yaml (manual)', after: 'Config files (parsed)' },
    { aspect: 'Maintenance', before: 'Constant drift', after: 'Zero' },
    { aspect: 'Jump to definition', before: 'Search manually', after: 'Enter â†’ nvim at line' },
    { aspect: 'Workflow docs', before: 'Scattered notes', after: 'tealdeer pages' }
  ]}
/>

Add a binding to `.tmux.conf`, it appears in the popup immediately. No yaml to update.

## Gotchas

1. **Tealdeer file extension** - Custom pages must end in `.page.md`, not `.md`.

2. **fzf become() vs execute()** - `execute()` runs a command and returns to fzf. `become()` replaces fzf entirely. For mode switching, you need `become()`.

3. **Column alignment** - The parser outputs pipe-separated values. `column -t -s'|'` aligns them.

---

**Resources:**
- [confhelp on PyPI](https://pypi.org/project/confhelp/)
- [confhelp on GitHub](https://github.com/Piotr1215/confhelp)
- [Example wrapper script](https://github.com/Piotr1215/confhelp/blob/main/examples/alacritty-popup.sh)
- [tealdeer docs](https://dbrgn.github.io/tealdeer/)
- Inspired by [Extracto](https://github.com/sarthakbhatkar1/Extracto)
